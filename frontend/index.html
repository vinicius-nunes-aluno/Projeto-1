<!DOCTYPE html> <!-- Serve para indicar ao navegador que o arquivo se trata de uma página WEB-->
<html lang="pt-br">

<!--Css-->

<head> <!-- serve para iniciar o cabeçalho do site. Nele estarão contidas outras TAG's como "title", "meta" e "style"-->
    <meta charset="utf-8"> <!-- serve para funcionar os acentos em palavras-->
    <link rel="stylesheet" href="css/pag_index/style.css">
    <link rel="stylesheet" type="text/css" href="css/pag_index/fonts-icones.css">



<!--Css-->

<!--Início Aba do Navegador-->
    <title>Editora Unifeso</title> 

<!--Fim Aba do Navegador-->

</head> <!-- finaliza a TAG "head"-->

<!--Cabecalho-->
<body>
    <header>
        <div class="container"><!--Começo do Container-->
            <div class="logo"><img src="imagens/logo.PNG"></div>
            <div class="pesquisar"><!--Começo da barra de pesquisa interativa-->
                <div class="search-box">
                    
                    <form method="post" action="#">
                        <input type="text" class="search-box-input" name="busca" placeholder="Faça sua Pesquisa">
                        <button class="search-box-button"><i class="search-box-icone icon icon-search"></i></button>
                    
                    </form>
                    
                </div><!-- Search -->            
            </div><!--Fim da barra de pesquisa interativa-->
            

        <div class="menu"> <!--Botões da barra-->
            <nav>
                <a href="#">CONTATOS</a>
                <a href="#">PUBLICAR</a>
                
            </nav>
        </div>
        
        

        <div class="menu2"> <!--Botão de Login presente na barra com efeito em negrito-->
            <nav>
                <p><a href="./login.html"><b>LOGIN</b></a></p>



            </nav>
        </div>

        </div><!--Fim do botão de Login-->

        </div><!--Fim do Container-->

        </a>
        
        </div>
    </header>
    <div class="introdução"> <!--Texto introdução-->
        <div class="title-introdução">
            <hr>
            <h1>Bem vindo ao Portal da Editora UNIFESO!</h1>
        </div>

         <div class="text-introdução">
            <h2>Somos uma fonte de conhecimento, inovação e inspiração, comprometida em oferecer publicações de alta qualidade. Explore nosso portal para descobrir uma variedade de conteúdos, desde pesquisas acadêmicas até obras enriquecedoras. Interaja conosco! Explore, compartilhe e até mesmo publique suas próprias contribuições. Junte-se a nós na construção deste espaço colaborativo e enriquecedor.</h2>
        </div>
    <hr>   
        <br><br>
        
        <h1><center>EM ALTA</center></h1>

    
        <main>
    
            <section>
            <aside>
                <h3><center>Resíduos orgânicos alternativos nos processos de compostagem e vermicompostagem</center></h3>
                <p><center><img src="imagens/artigo1.png" height="200px" width="240px"></center></p>
                <p><center><small>Autor(a): Cátia Araújo Farias<br>ISBN: 978-85-93361-31-9<br>N° de páginas: 144<br>Data de publicação: 01/09/2019</small></center></p>
                <hr><Center>
                    <Div class="btn">
                        <button><img src="imagens/curtir.png" height="40px" width="40px"> </button>
                        <button><img src="imagens/comentario.svg" height="40px" width="40px"></button>
                        <button><img src="imagens/compartilhar.svg" height="40px" width="40px"></button>
                        <a href="pdf/residuos.pdf">
                            <button><img src="imagens/download.png" height="40px" width="40px"></button>
                        </a>
                    </Div>
                    </Center><hr>
            </aside>
            </section>

            <section>
            <aside>
                <h3><center>Um olhar sociológico sobre o conceito de trabalho</center></h3>
                <p><center><img src="imagens/artigo2.png" height="200px" width="240px"></center></p>
                <p><Center><small>Autor(a): Paulo Sérgio de Oliveira<br>ISBN: 978-85-93361-30-2<br>N° de páginas: 118<br>Data de publicação: 26/05/2021</small></Center></p>
                <hr><Center>
                    <Div class="btn">
                        <button><img src="imagens/curtir.png" height="40px" width="40px"> </button>
                        <button><img src="imagens/comentario.svg" height="40px" width="40px"></button>
                        <button><img src="imagens/compartilhar.svg" height="40px" width="40px"></button>
                        <a href="pdf/olhar.pdf">
                            <button><img src="imagens/download.png" height="40px" width="40px"></button>
                        </a>
                    </div>
                    </Center><hr>
            </aside>
            </section>
            
            <section>
            <aside>
                <h3><center>Um congresso dos estudantes de medicina do Unifeso</center></h3>
                <p><center><img src="imagens/artigo3.png" height="200px" width="240px"></center></p>
                <p><Center><small>Autor(a): Cátia Araújo Farias<br>ISBN: 978-65-87357-31-7<br>N° de páginas: 147<br>Data de publicação: 17/01/2021</small></Center></p>
                <hr><Center>
                    <Div class="btn">
                        <button><img src="imagens/curtir.png" height="40px" width="40px"> </button>
                        <button><img src="imagens/comentario.svg" height="40px" width="40px"></button>
                        <button><img src="imagens/compartilhar.svg" height="40px" width="40px"></button>
                        <a href="pdf/congresso.pdf">
                            <button><img src="imagens/download.png" height="40px" width="40px"></button>
                        </a>
                    </Div>
                    </Center><hr>
            </aside>
            </section>
        
        
    </main>

    <script>
        // Esta função será executada assim que a página terminar de carregar
        window.onload = async () => {
            const mainContainer = document.querySelector('main');

            try {
                // 1. Busca as publicações no backend
                const response = await fetch('http://localhost:90/api/publications');
                
                if (!response.ok) {
                    throw new Error('Não foi possível carregar as publicações.');
                }

                const publications = await response.json();

                // 2. Limpa o conteúdo estático que está no HTML
                mainContainer.innerHTML = '';

                if (publications.length === 0) {
                    mainContainer.innerHTML = '<p style="text-align: center; font-size: 1.2rem;">Nenhuma publicação encontrada.</p>';
                    return;
                }

                // 3. Para cada publicação, cria um card e insere na página
                publications.forEach(pub => {
                    // Formata a data para o padrão brasileiro (dd/mm/aaaa)
                    const formattedDate = new Date(pub.publishDate).toLocaleDateString('pt-BR');

                    // Cria o HTML do card com os dados da publicação
                    const publicationCardHTML = `
                        <section>
                            <aside>
                                <h3><center>${pub.title}</center></h3>
                                <p><center><img src="http://localhost:90/uploads/${pub.cover}" height="200px" width="240px"></center></p>
                                <p><center><small>
                                    Autor(a): ${pub.organizer}<br>
                                    N° de páginas: ${pub.pages}<br>
                                    Data de publicação: ${formattedDate}
                                </small></center></p>
                                <hr><Center>
                                    <div class="btn">
                                        <button><img src="imagens/curtir.png" height="40px" width="40px"></button>
                                        <button><img src="imagens/comentario.svg" height="40px" width="40px"></button>
                                        <button><img src="imagens/compartilhar.svg" height="40px" width="40px"></button>
                                        
                                        <a href="http://localhost:90/uploads/${pub.contentFile}" download>
                                            <button><img src="imagens/download.png" height="40px" width="40px"></button>
                                        </a>
                                    </div>
                                </Center>
                                <hr>
                            </aside>
                        </section>
                    `;

                    // 4. Adiciona o card recém-criado ao container principal
                    mainContainer.innerHTML += publicationCardHTML;
                });

            } catch (error) {
                console.error('Erro ao buscar publicações:', error);
                mainContainer.innerHTML = '<p style="text-align: center; color: red;">Falha ao carregar as publicações. Verifique se o servidor está no ar.</p>';
            }
        };
    </script>
</body>
</html>